---
layout: post
title: canvas 初级应用
category: javascript
---

<style>canvas{border:1px solid #666}</style>
<h2><a href="http://www.w3school.com.cn/html5/tag_canvas.asp">Canvas 元素</a></h2>
<div>
	<p>在 HTML5 中 Canvas 元素用于在网页上绘制图形，该元素标签强大之处在于可以直接在HTML上进行图形操作，具有极大的应用价值。</p>
	<p>Canvas 标记和 SVG 以及 VML 之间的一个重要的不同是，Canvas 有一个基于 JavaScript 的绘图 API，而 SVG 和 VML 使用一个 XML 文档来描述绘图。</p>
	<p>大多数 Canvas 绘图 API 都没有定义在 Canvas 元素本身上，而是定义在通过画布的 getContext() 方法获得的一个“绘图环境”对象上。</p>
</div>
<br>
<h2><a href="http://www.w3school.com.cn/jsref/met_canvas_getcontext.asp">getContext() 方法</a></h2>
<div>
	<p>getContext() 是内建的 HTML5 对象，返回一个用于在画布上绘图的环境（拥有多种绘制路径、矩形、圆形、字符以及添加图像的方法）</p>
	<pre>语法：Canvas.getContext(contextID)</pre>
	<p>参数 contextID 指定了您想要在画布上绘制的类型。当前唯一的合法值是 "2d"，它指定了二维绘图，并且导致这个方法返回一个环境对象，该对象导出一个二维绘图 API。</p>
	<p>在未来，如果 canvas 标签扩展到支持 3D 绘图，getContext() 方法可能允许传递一个 "3d" 字符串参数。</p>
</div>
<br>

<div class="bs-docs-example"><canvas id="A" width="100" height="100">您的浏览器不支持canvas元素。</canvas></div>
<pre class="prettyprint linenums">
/*
 * canvas 元素本身没有绘图能力，所有的绘制工作必须在javascript内部完成
*/
var canvas=document.getElementById('A');
var ctx=canvas.getContext('2d');
ctx.fillStyle="red";//fillStyle 设置或返回用于填充绘画的颜色、渐变或模式
ctx.fillRect(10,10,50,50);//fillRect 在画布上绘制50*50的矩形，从左上角 (10,10) 开始;
</pre>
<script>
    /*
     * canvas 元素本身没有绘图能力，所有的绘制工作必须在javascript内部完成
    */
    var canvas=document.getElementById('A');
    var ctx=canvas.getContext('2d');
    ctx.fillStyle="red";//fillStyle 设置或返回用于填充绘画的颜色、渐变或模式
    ctx.fillRect(10,10,50,50);//fillRect 在画布上绘制50*50的矩形，从左上角 (10,10) 开始;
</script>
<br>
<div class="bs-docs-example"><canvas id="B" width="100" height="100">您的浏览器不支持canvas元素。</canvas></div>
<pre class="prettyprint linenums">
var canvas=document.getElementById('B');
var ctx=canvas.getContext('2d');
//把路径移动到画布中指定的点，不创建线条
ctx.moveTo(10,10);
//添加一个新点，然后在画布中创建从该点到指定点的线条
ctx.lineTo(30,80);
ctx.lineTo(50,50);
ctx.lineTo(90,80);
ctx.stroke();
</pre>
<script>
	var canvas=document.getElementById('B');
	var ctx=canvas.getContext('2d');
	//把路径移动到画布中指定的点，不创建线条
	ctx.moveTo(10,10);
	//添加一个新点，然后在画布中创建从该点到指定点的线条
	ctx.lineTo(30,80);
	ctx.lineTo(50,50);
	ctx.lineTo(90,80);
	ctx.stroke();
</script>
<br>
<div class="bs-docs-example"><canvas id="C" width="100" height="100">您的浏览器不支持canvas元素。</canvas></div>
<pre class="prettyprint linenums">
/*
 * http://www.w3school.com.cn/html5/canvas_arc.asp
 * context.arc(x,y,r,sAngle,eAngle,counterclockwise);
 * x：圆的中心的X坐标
 * y：圆的中心的Y坐标
 * r：圆的半径
 * sAngle：起始角，以弧度计（弧的圆的3点钟位置是0度）
 * eAngle：结束角，以弧度计
 * counterclockwise：可选。规定应该逆时针还是顺时针绘图。False = 顺时针，true = 逆时针。
*/
var canvas=document.getElementById('C');
var ctx=canvas.getContext('2d');
ctx.fillStyle='blue';//设置或返回用于填充绘画的颜色、渐变或模式
ctx.strokeStyle='red';//设置或返回用于笔触的颜色、渐变或模式
ctx.beginPath();//起始一条路径，或重置当前路径
ctx.arc(50,50,20,0,Math.PI*2,true);//创建弧/曲线（用于创建圆形或部分圆）
ctx.closePath();//创建从当前点回到起点的路径
ctx.fill();//填充当前绘图
ctx.stroke();//绘制已定义的路径
</pre>
<script>
	/*
	 * http://www.w3school.com.cn/html5/canvas_arc.asp
	 * context.arc(x,y,r,sAngle,eAngle,counterclockwise);
	 * x：圆的中心的X坐标
	 * y：圆的中心的Y坐标
	 * r：圆的半径
	 * sAngle：起始角，以弧度计（弧的圆的3点钟位置是0度）
	 * eAngle：结束角，以弧度计
	 * counterclockwise：可选。规定应该逆时针还是顺时针绘图。False = 顺时针，true = 逆时针。
	*/
	var canvas=document.getElementById('C');
	var ctx=canvas.getContext('2d');
	ctx.fillStyle='blue';//设置或返回用于填充绘画的颜色、渐变或模式
	ctx.strokeStyle='red';//设置或返回用于笔触的颜色、渐变或模式
	ctx.beginPath();//起始一条路径，或重置当前路径
	ctx.arc(50,50,20,0,Math.PI*2,true);//创建弧/曲线（用于创建圆形或部分圆）
	ctx.closePath();//创建从当前点回到起点的路径
	ctx.fill();//填充当前绘图
	ctx.stroke();//绘制已定义的路径
</script>
<br>
<div class="bs-docs-example"><canvas id="D" width="100" height="100">您的浏览器不支持canvas元素。</canvas></div>
<pre class="prettyprint linenums">
/*
 * createLinearGradient() 创建线性渐变（用在画布内容上）
 * context.createLinearGradient(x0,y0,x1,y1);
 * 使用该对象作为 strokeStyle 或 fillStyle 属性的值。
 * 使用 addColorStop() 方法规定不同的颜色，以及在 gradient 对象中的何处定位颜色。
 * x0：渐变开始点的 x 坐标
 * y0：渐变开始点的 y 坐标
 * x1：渐变结束点的 x 坐标
 * y1：渐变结束点的 y 坐标
 *
 * addColorStop() 规定渐变对象中的停止位置和颜色
 * grd.addColorStop(stop,color);
 * stop：介于 0.0 与 1.0 之间的值，表示渐变中开始与结束之间的位置。
 * color：在结束位置显示的 CSS 颜色值
*/
var canvas=document.getElementById('D');
var ctx=canvas.getContext('2d');
var grd=ctx.createLinearGradient(0,0,100,0);
grd.addColorStop(0,'blue');
grd.addColorStop(1,'red');
ctx.fillStyle=grd;
ctx.fillRect(0,0,80,100);
</pre>
<script>
	/*
	 * createLinearGradient() 创建线性渐变（用在画布内容上）
	 * context.createLinearGradient(x0,y0,x1,y1);
	 * 使用该对象作为 strokeStyle 或 fillStyle 属性的值。
	 * 使用 addColorStop() 方法规定不同的颜色，以及在 gradient 对象中的何处定位颜色。
	 * x0：渐变开始点的 x 坐标
	 * y0：渐变开始点的 y 坐标
	 * x1：渐变结束点的 x 坐标
	 * y1：渐变结束点的 y 坐标
	 *
	 * addColorStop() 规定渐变对象中的停止位置和颜色
	 * grd.addColorStop(stop,color);
	 * stop：介于 0.0 与 1.0 之间的值，表示渐变中开始与结束之间的位置。
	 * color：在结束位置显示的 CSS 颜色值
	*/
	var canvas=document.getElementById('D');
	var ctx=canvas.getContext('2d');
	var grd=ctx.createLinearGradient(0,0,100,0);
	grd.addColorStop(0,'blue');
	grd.addColorStop(1,'red');
	ctx.fillStyle=grd;
	ctx.fillRect(0,0,80,100);
</script>
<br>
<div class="bs-docs-example"><canvas id="E" width="100" height="100">您的浏览器不支持canvas元素。</canvas></div>
<pre class="prettyprint linenums">
/*
 * http://www.w3school.com.cn/html5/canvas_drawimage.asp
 * drawImage() 向画布上绘制图像、画布或视频，也能够绘制图像的某些部分，以及/或者增加或减少图像的尺寸。
 *
 * ctx.drawImage(img,sx,sy,swidth,sheight,x,y,width,height);
 * img：规定要使用的图像、画布或视频。
 * sx：可选。开始剪切的 x 坐标位置。
 * sy：可选。开始剪切的 y 坐标位置。
 * swidth：可选。被剪切图像的宽度。
 * sheight：可选。被剪切图像的高度。
 * x：在画布上放置图像的 x 坐标位置。
 * y：在画布上放置图像的 y 坐标位置。
 * width：可选。要使用的图像的宽度。（伸展或缩小图像）
 * height：可选。要使用的图像的高度。（伸展或缩小图像）
*/
var canvas=document.getElementById('E');
var ctx=canvas.getContext('2d');
var Img=new Image();
Img.onload=function(){
	ctx.drawImage(Img,0,0,50,50);
}
Img.src="http://xiaoxiehang.qiniudn.com/face.jpg";
</pre>
<script>
	/*
	 * http://www.w3school.com.cn/html5/canvas_drawimage.asp
	 * drawImage() 向画布上绘制图像、画布或视频，也能够绘制图像的某些部分，以及/或者增加或减少图像的尺寸。
	 *
	 * ctx.drawImage(img,sx,sy,swidth,sheight,x,y,width,height);
	 * img：规定要使用的图像、画布或视频。
	 * sx：可选。开始剪切的 x 坐标位置。
	 * sy：可选。开始剪切的 y 坐标位置。
	 * swidth：可选。被剪切图像的宽度。
	 * sheight：可选。被剪切图像的高度。
	 * x：在画布上放置图像的 x 坐标位置。
	 * y：在画布上放置图像的 y 坐标位置。
	 * width：可选。要使用的图像的宽度。（伸展或缩小图像）
	 * height：可选。要使用的图像的高度。（伸展或缩小图像）
	*/
	var canvas=document.getElementById('E');
	var ctx=canvas.getContext('2d');
	var Img=new Image();
	Img.onload=function(){
		ctx.drawImage(Img,0,0,50,50);
	}
	Img.src="http://xiaoxiehang.qiniudn.com/face.jpg";
</script>
<br>
<dl>
	<dt>更多参考文献：</dt>
	<dd><a href="http://www.w3school.com.cn/html5/html_5_canvas.asp">HTML5 Canvas 教程</a></dd>
	<dd><a href="http://www.w3school.com.cn/html5/html5_ref_canvas.asp">HTML5 Canvas 参考手册</a></dd>
	<dd><a href="http://www.cnblogs.com/tim-li/archive/2012/08/06/2580252.html#0">玩转html5 canvas 画图</a></dd>
	<dd><a href="https://developer.mozilla.org/zh-CN/docs/Canvas_tutorial">mozilla  Canvas教程</a></dd>
</dl>

