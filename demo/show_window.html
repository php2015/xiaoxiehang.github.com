<!DOCTYPE html>
<html lang="zh-cn" class="no-js">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>showWin</title>

<style type="text/css">
*{margin:0;padding:0;}
ul,li{list-style-type:none;}
body{background:url(http://xiaoxiehang.h5.5vv.cc/blog/bg/5.jpg) no-repeat;background-size:cover;}
a{font:16px 'microsoft yahei';color:#fff;}

.win{z-index:99;position:fixed;width:500px;font-family:'microsoft yahei';border:1px solid #eee;box-shadow:5px 5px 10px #000;_position:absolute;}
  .win-hd{cursor:move;position:relative;padding:10px;background:#eee;background:-webkit-gradient(linear, left top, left bottom,color-stop(0,#fff),color-stop(1, #ccc));}
		.win-hd h3{font-weight:400;font-size:16px;text-shadow:1px 1px 1px #fff;}
		.win-close{cursor:pointer;position:absolute;right:10px;top:10px;font-size:12px;}
	.win-bd{padding:10px;background:#fff;}
.win-mask{z-index:98;position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);}


</style>
</head>
<body>
<a href="javascript:;" class='showWin'>showWin</a>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
<script>
(function(){
	$.extend({
		showWin:function(options){
			var defaults={
				obj:'',
				width:'',
				height:'',
				title:'',
				content:'',
				mask:0
			};
			var opts=$.extend(defaults,options);
			
			if(!opts.obj) return false;
			
			//是否显示遮罩
			if(opts.mask){
				if($('.win-mask').length){
					$('.win-mask').show();
				}else{
					var w_width=$(window).width(),w_height=$(window).height();
					$('body').append('<div class="win-mask" style="width:'+w_width+';height:'+w_height+'"></div>');
				}
			}
			if(!$('#'+opts.obj).length){
				var h='<div id="'+opts.obj+'" class="win" style="display:none;width:'+opts.width+';">';
					h+='<div class="win-hd"><h3>'+opts.title+'</h3><span class="win-close" title="关闭">X</span></div>';
					h+='<div class="win-bd">'+opts.content+'</div>';
					h+='</div>';
				$('body').append(h);
			}
			var o=$('#'+opts.obj);
			o.slideDown(100);
			$('.win-mask').fadeIn(300);
			
			var win={
				//关闭弹窗
				close:function(e){
					$('.win-mask').fadeOut(300);
					o.slideUp(100);
				},
				//设置弹窗左边距
				left:function(){
					var w_obj=o.outerWidth();
					var w_window=$(window).width();
					o.css('left',(w_window-w_obj)/2);
				},
				//设置弹窗上边距
				top:function(){
					var h_obj=o.find('.win-hd').outerHeight()+o.find('.win-bd').outerHeight();//获取弹框高度
					//var h_obj=o.outerHeight();
					var h_window=$(window).height();
					o.css('top',(h_window-h_obj)/2);
				}
			}
			
			win.left();
			win.top();
			
			$(window).bind('scroll resize',function(){
				win.left();
				win.top();
			})
			
			$('.win-close,.win-mask').bind('click',function(){
				win.close();
				return false;
			})
		}
	});
})(jQuery);
$('.showWin').click(function(){
	var content='<p>网页内容网页内容网页内容网页内容</p>';
	$.showWin({obj:'win-login',width:'400px',title:'标题',content:content,mask:1});
})

</script>
</body>
</html>
